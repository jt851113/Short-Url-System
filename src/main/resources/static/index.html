<!DOCTYPE html>
<html>
<head>
    <title>短網址產生器</title>
    <meta charset="UTF-8">
</head>
<body>
<h1>短網址產生器</h1>
<form>
    <label for="url">輸入網址：</label>
    <input type="text" id="url" name="url"><br><br>
    <input type="button" value="縮短網址" onclick="getShortUrl()">
</form>
<p id="shortUrl"></p>

<script>
    function getShortUrl() {
        var url = document.getElementById("url").value;
        fetch('/shorten', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                url: url
            })
        })
            .then(response => response.json())
            .then(data => {
                var shortUrl = "http://localhost/" + data.url;
                var a = document.createElement('a');
                var linkText = document.createTextNode(shortUrl);
                a.appendChild(linkText);
                a.title = shortUrl;
                a.href = shortUrl;
                document.getElementById("shortUrl").innerHTML = "短網址：";
                document.getElementById("shortUrl").appendChild(a);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    }
</script>
</body>
</html>